function Quote(text,author){this.text=text,this.author=author}function lazyLoadBg(el,imageSource){$("<img/>").attr("src",imageSource).on({load:function(){$(this).remove(),$(el).css("backgroundImage","url("+imageSource+")"),$(el).css("opacity","1")},error:function(){$(this).remove()}})}function parallax(){window.scrollY<coverHeight&&(translate=Math.round(window.scrollY/parallaxThreshold),window.requestAnimationFrame(function(){cover.style.transform="translateY("+translate+"px)"}))}function debounce(fn,wait){var timeout;return function(){clearTimeout(timeout),timeout=setTimeout(function(){fn.apply(this,arguments)},wait||1)}}function Carousel(element){this._autoDuration=0,this._container=element.querySelector(".slider"),this._interval=null,this._nav=element.querySelector(".nav-slider"),this._slide=0,this._touchAnchorX=0,this._touchTime=0,this._touchX1=0,this._touchX2=0,element.addEventListener("click",this),element.addEventListener("touchstart",this),element.addEventListener("touchmove",this),element.addEventListener("touchend",this),element.addEventListener("transitionend",this),window.addEventListener("blur",this),window.addEventListener("focus",this),this.set(0)}var Glitch=function(){function Glitch(){this._text=document.querySelector(".heading"),this._filter=document.querySelector(".svg-filters"),this._turb=this._filter.querySelector("#filter feTurbulence"),this._turbVal={val:1e-6},this._turbValX={val:1e-6},this.createTimeline()}return Glitch.prototype.createTimeline=function(){var _this=this;this.timeline=new TimelineMax({repeat:9999,onUpdate:function(){_this._turb.setAttribute("baseFrequency",_this._turbVal.val+" "+_this._turbValX.val)}}),this.timeline.to(this._turbValX,.1,{val:.3,ease:Power0.easeNone},.25)},Glitch}();new Glitch,$("figcaption").hover(function(){$(this).css({"background-color":$(this).attr("data-color")})});var quotes=[];quotes.push(new Quote("thinking about what to eat for lunch","Will work for homemade apple pie")),quotes.push(new Quote("keeping his suey chopped","He doesn't really care for Chinese food")),quotes.push(new Quote("listening to obnoxiously loud music","Very metalhead, but listens to anything"));var getNewRandomQuote=function(){return quotes[Math.floor(Math.random()*quotes.length)]};$(document).ready(function(){var displayNewQuote=function(){var newQuote=getNewRandomQuote();$("#text").html(newQuote.text),$("#author").html(newQuote.author)};displayNewQuote()}),$(".lazy").each(function(index,el){lazyLoadBg(el,$(el).data("src"))});var cover=document.querySelector(".parallax"),coverHeight=Math.round(cover.offsetHeight),translate,parallaxThreshold=3;parallax(),window.addEventListener("scroll",parallax,!1),window.addEventListener("resize",debounce(function(){coverHeight=Math.round(cover.offsetHeight)},800)),Carousel.prototype.auto=function(ms){if(this._interval&&(clearInterval(this._interval),this._interval=null),ms){this._autoDuration=ms;var self=this;this._interval=setInterval(function(){self.next()},ms)}},Carousel.prototype.handleEvent=function(event){event.touches&&event.touches.length>0&&(this._touchTime=+new Date,this._touchX1=this._touchX2,this._touchX2=event.touches[0].screenX);var screen=document.documentElement.clientWidth,position=this._slide+(this._touchAnchorX-this._touchX2)/screen,velocity=new Date-this._touchTime<=200?(this._touchX1-this._touchX2)/screen:0;switch(event.type){case"blur":this.auto(0);break;case"click":if(event.target.parentNode!=this._nav)break;var i=parseInt(event.target.dataset.slide);isNaN(i)||(event.preventDefault(),this.auto(0),this.set(i));break;case"focus":this.auto(this._autoDuration);break;case"touchstart":event.preventDefault(),this.auto(0),this._container.style.transition="none",this._touchAnchorX=this._touchX1=this._touchX2;break;case"touchmove":this._container.style.transform="translate3d("+100*-position+"%, 0, 0)";break;case"touchend":this._container.style.transition="";var offset=Math.min(Math.max(4*velocity,-.5),.5);this.set(Math.round(position+offset));break;case"transitionend":var i=this._slide,count=this._countSlides();if(i>=0&&i<count)break;this._container.style.transition="none",this._container.style.transform="translate3d("+(i<0?100*-count:100)+"%, 0, 0)",this._container.offsetHeight,this._container.style.transition="",this._container.offsetHeight,this.set(i<0?count-1:0)}},Carousel.prototype.next=function(){this.set(this._slide+1)},Carousel.prototype.previous=function(){this.set(this._slide-1)},Carousel.prototype.set=function(i){var count=this._countSlides();i<0?i=-1:i>=count&&(i=count),this._slide=i,this._container.style.transform="translate3d("+100*-i+"%, 0, 0)",this._updateNav()},Carousel.prototype._countSlides=function(){return this._container.querySelectorAll(".slide").length},Carousel.prototype._updateNav=function(){for(var html="",count=this._countSlides(),i=0;i<count;i++)i>0&&(html+="&nbsp;"),html+="<a"+(i==this._slide?' class="current"':"")+' data-slide="'+i+'">‚óè</a>';this._nav.innerHTML=html};var carousels=Array.prototype.map.call(document.querySelectorAll(".carousel"),function(element){var carousel=new Carousel(element);return carousel.auto(3e3),carousel});